@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Syncopate:wght@400;700&display=swap');

:root{
  --ink:#f6f7fa;
  --muted:#e0e3ea;

  --bg-1:#1a1b20;
  --bg-2:#23252d;
  --bg-3:#30323b;

  --glass-a:rgba(236,239,245,.24);
  --glass-b:rgba(216,221,230,.16);
  --glass-c:rgba(245,247,252,.28);

  --line:rgba(255,255,255,.52);
  --line-soft:rgba(255,255,255,.3);
  --edge-hi:rgba(255,255,255,.62);
  --edge-lo:rgba(120,126,142,.42);

  --shadow-outer:0 18px 34px rgba(0,0,0,.36);
  --shadow-inner:inset 0 1px 0 rgba(255,255,255,.54), inset 0 -1px 0 rgba(90,96,112,.28);

  --blur:18px;
  --radius-xl:32px;
  --radius-lg:28px;
  --radius-md:20px;
  --radius-sm:14px;

  --topDockH:92px;
  --bottomDockH:92px;
  --dockMaxW:500px;
  --btn-size:58px;
  --btn-font:29px;

  --ok:#79f3bc;
  --err:#ff6b7e;
  --focus:#95c8ff;
}

*{box-sizing:border-box}
.fx-defs{position:absolute; width:0; height:0; overflow:hidden}

body{
  margin:0;
  max-width:1080px;
  min-height:100dvh;
  padding:calc(var(--topDockH) + 10px) 14px calc(var(--bottomDockH) + 10px);
  color:var(--ink);
  background:none;
  font-family:'Inter','Segoe UI',sans-serif;
  font-variant-emoji:text;
  overflow-x:hidden;
}

#bg{
  position:fixed;
  inset:0;
  z-index:0;
  pointer-events:none;
  background:
    radial-gradient(900px 520px at 16% -8%, rgba(255,255,255,.12), transparent 58%),
    radial-gradient(820px 520px at 96% 2%, rgba(255,255,255,.08), transparent 56%),
    linear-gradient(148deg,var(--bg-1),var(--bg-2) 44%,var(--bg-3));
}

#bg::before{
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(900px 420px at 60% 65%, rgba(255,255,255,.06), transparent 68%),
    repeating-linear-gradient(112deg, rgba(255,255,255,.01) 0 2px, rgba(0,0,0,.012) 2px 4px);
  opacity:.26;
  mix-blend-mode:soft-light;
}

#bg::after{
  content:"";
  position:absolute;
  inset:0;
  background:
    url('icon-192.png') center 42% / min(42vw, 320px) auto no-repeat,
    radial-gradient(1200px 900px at 50% 120%, rgba(255,255,255,.1), transparent 58%),
    radial-gradient(700px 380px at 50% 52%, rgba(245,248,255,.14), transparent 58%),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0) 32%, rgba(0,0,0,.12) 100%);
  opacity:.22;
}

#app{
  position:relative;
  z-index:2;
  display:flex;
  flex-direction:column;
  gap:14px;
}

.hero{
  position:relative;
  overflow:hidden;
  border:1px solid var(--line-soft);
  border-radius:var(--radius-xl);
  background:linear-gradient(160deg,var(--glass-a),var(--glass-b));
  backdrop-filter:blur(var(--blur));
  -webkit-backdrop-filter:blur(var(--blur));
  box-shadow:var(--shadow-inner), var(--shadow-outer);
  padding:16px 20px;
  text-align:center;
}

.hero::before{
  content:"";
  position:absolute;
  inset:1px 1px auto 1px;
  height:45%;
  border-radius:calc(var(--radius-xl) - 1px) calc(var(--radius-xl) - 1px) 22px 22px;
  background:linear-gradient(180deg, rgba(255,255,255,.32) 0%, rgba(255,255,255,.16) 42%, rgba(255,255,255,.03) 100%);
  filter:url(#glass-distort);
  pointer-events:none;
}

.hero h1{
  margin:0;
  font-family:'Syncopate','Twentieth Century','Century Gothic','Futura','Inter',sans-serif;
  font-size:32px;
  line-height:1.05;
  letter-spacing:1.1px;
  color:#fff;
  text-shadow:0 1px 0 rgba(0,0,0,.35), 0 0 20px rgba(255,255,255,.08);
}

/* Oculto en todo momento (solo se mantiene para lÃ³gica interna) */
#status{
  position:absolute !important;
  width:1px !important;
  height:1px !important;
  padding:0 !important;
  margin:-1px !important;
  overflow:hidden !important;
  clip:rect(0,0,0,0) !important;
  white-space:nowrap !important;
  border:0 !important;
}

.row{display:flex;gap:12px;flex-wrap:wrap}
.card{
  position:relative;
  overflow:hidden;
  border:1px solid var(--line-soft);
  border-radius:var(--radius-lg);
  padding:14px;
  flex:1;
  min-width:320px;
  margin-bottom:12px;
  background:linear-gradient(165deg,var(--glass-a),var(--glass-b));
  backdrop-filter:blur(var(--blur));
  -webkit-backdrop-filter:blur(var(--blur));
  box-shadow:var(--shadow-inner), var(--shadow-outer);
}

.card::before{
  content:"";
  position:absolute;
  inset:1px 1px auto 1px;
  height:38%;
  border-radius:calc(var(--radius-lg) - 1px) calc(var(--radius-lg) - 1px) 20px 20px;
  background:linear-gradient(180deg, rgba(255,255,255,.24) 0%, rgba(255,255,255,.12) 44%, rgba(255,255,255,.02) 100%);
  filter:url(#glass-distort);
  pointer-events:none;
}

textarea,input,select,button{font:inherit}
textarea,input,select{
  width:100%;
  max-width:100%;
  padding:11px 12px;
  border:1px solid var(--line-soft);
  border-radius:var(--radius-sm);
  background:linear-gradient(165deg, rgba(244,247,252,.2), rgba(223,229,239,.12));
  color:var(--ink);
  backdrop-filter:blur(12px);
  -webkit-backdrop-filter:blur(12px);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.36);
}

textarea::placeholder,input::placeholder{color:rgba(246,248,252,.72)}
textarea{min-height:145px;resize:vertical}
input,select{min-height:44px}
label{display:block;margin:10px 0 6px;font-weight:600;color:#f3f6fb}

button{
  border:1px solid var(--line);
  border-radius:var(--radius-sm);
  background:linear-gradient(165deg, var(--glass-c), rgba(218,223,233,.18));
  color:var(--ink);
  padding:10px 14px;
  cursor:pointer;
  backdrop-filter:blur(14px);
  -webkit-backdrop-filter:blur(14px);
  box-shadow:var(--shadow-inner);
  transition:transform .15s ease, border-color .15s ease, filter .15s ease;
}

button:hover:not(:disabled){
  transform:translateY(-1px);
  border-color:var(--edge-hi);
  filter:brightness(1.04);
}

button:disabled{opacity:.45;cursor:not-allowed}
button:focus-visible,input:focus-visible,textarea:focus-visible,select:focus-visible{outline:2px solid var(--focus);outline-offset:2px}

.muted{color:var(--muted);font-size:14px}
.ok{color:var(--ok);font-weight:700}
.err{color:var(--err);font-weight:700}
.small{font-size:12px}
.two{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(164px,1fr));gap:10px;margin-top:8px}
#thumbs{margin-bottom:12px}

input[type="file"].fileinput{
  position:absolute;
  width:1px;
  height:1px;
  padding:0;
  margin:-1px;
  overflow:hidden;
  clip:rect(0,0,0,0);
  border:0;
  opacity:0;
}

.thumb{
  border:1px solid var(--line-soft);
  border-radius:var(--radius-md);
  padding:8px;
  background:linear-gradient(165deg, rgba(243,247,252,.16), rgba(216,221,231,.1));
  backdrop-filter:blur(10px);
  -webkit-backdrop-filter:blur(10px);
  box-shadow:var(--shadow-inner);
}

.thumb img{
  width:100%;
  height:120px;
  object-fit:cover;
  border-radius:12px;
  display:block;
  background:rgba(37,40,50,.88);
}

.thumb-actions{display:flex;gap:8px;margin-top:8px}
.thumb-actions > button{flex:1;min-height:42px;padding:0;font-size:22px;border-radius:12px}

.fili-card{
  border:1px solid var(--line-soft);
  border-radius:var(--radius-md);
  padding:10px;
  background:linear-gradient(165deg, rgba(243,247,252,.16), rgba(216,221,231,.1));
  backdrop-filter:blur(10px);
  -webkit-backdrop-filter:blur(10px);
  box-shadow:var(--shadow-inner);
}

.fili-head{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:8px}
.fili-title{font-weight:700}
.fili-actions{display:flex;gap:8px;flex-wrap:wrap}
.fili-actions .btnmini{padding:8px 10px;border-radius:12px}
.fili-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.fili-grid label{margin:0;font-size:14px}

.emoji-row{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px;width:100%;justify-items:center}
.emoji-row.two{grid-template-columns:repeat(2,minmax(0,1fr))}

.emoji-row > label,
.emoji-row > button{
  width:var(--btn-size);
  height:var(--btn-size);
  min-height:var(--btn-size);
  max-width:var(--btn-size);
  min-width:0;
  display:flex;
  align-items:center;
  justify-content:center;
  margin:0;
  border-radius:999px;
}

#topDock,
#bottomDock{
  position:fixed;
  z-index:180000;
  min-width:0 !important;
  margin-bottom:0 !important;
  flex:none !important;
  box-sizing:border-box;
  left:50%;
  transform:translateX(-50%);
  width:min(var(--dockMaxW), calc(100vw - env(safe-area-inset-left) - env(safe-area-inset-right) - 16px));
  padding:12px;
  border:1px solid var(--line-soft);
  border-radius:var(--radius-xl);
  background:linear-gradient(165deg, rgba(239,243,250,.24), rgba(204,210,222,.16));
  backdrop-filter:blur(20px);
  -webkit-backdrop-filter:blur(20px);
  box-shadow:var(--shadow-inner), 0 14px 30px rgba(0,0,0,.32);
  overflow:hidden;
}

#topDock{top:10px}
#bottomDock{bottom:10px}

#topDock .emoji-row,
#bottomDock .emoji-row{max-width:none;width:100%;margin:0 auto}

#topDock::before,
#bottomDock::before{
  content:"";
  position:absolute;
  inset:1px 1px auto 1px;
  height:45%;
  border-radius:calc(var(--radius-xl) - 1px) calc(var(--radius-xl) - 1px) 22px 22px;
  background:linear-gradient(180deg, rgba(255,255,255,.3) 0%, rgba(255,255,255,.14) 44%, rgba(255,255,255,.03) 100%);
  pointer-events:none;
}

.filebtn,
#btnToggleFili,
#btnToggleCompare,
#btnEnviar,
#btnDescargar,
#btnLimpiar{
  position:relative;
  overflow:hidden;
  font-size:var(--btn-font) !important;
  line-height:1 !important;
  padding:0 !important;
  border:1px solid var(--line) !important;
  background:linear-gradient(165deg, rgba(246,249,253,.34), rgba(219,225,234,.18)) !important;
  color:var(--ink) !important;
  box-shadow:inset 0 1px 0 rgba(255,255,255,.68), inset 0 -1px 0 rgba(126,132,146,.26), 0 6px 14px rgba(0,0,0,.22) !important;
  font-family:'Inter','Segoe UI',sans-serif !important;
  font-weight:500 !important;
  font-variant-emoji:text;
  color:#ffffff !important;
  text-shadow:0 1px 0 rgba(0,0,0,.35);
}

.filebtn::before,
#btnToggleFili::before,
#btnToggleCompare::before,
#btnEnviar::before,
#btnDescargar::before,
#btnLimpiar::before{
  content:"";
  position:absolute;
  left:6%;
  right:6%;
  top:6%;
  height:46%;
  border-radius:999px;
  background:linear-gradient(180deg, rgba(255,255,255,.36) 0%, rgba(255,255,255,.18) 45%, rgba(255,255,255,.05) 100%);
  filter:url(#glass-distort);
  pointer-events:none;
}

.filebtn::after,
#btnToggleFili::after,
#btnToggleCompare::after,
#btnEnviar::after,
#btnDescargar::after,
#btnLimpiar::after{
  content:"";
  position:absolute;
  left:8%;
  right:8%;
  bottom:6%;
  height:36%;
  border-radius:999px;
  background:linear-gradient(180deg, rgba(0,0,0,0), rgba(62,67,80,.16));
  filter:url(#glass-distort);
  pointer-events:none;
}

#btnToggleFili,
#btnToggleCompare{position:relative;overflow:visible}

#filiCountBadge{
  position:absolute;
  top:-4px;
  right:-4px;
  min-width:18px;
  height:18px;
  padding:0 4px;
  border-radius:999px;
  display:none;
  align-items:center;
  justify-content:center;
  font-size:11px;
  font-weight:700;
  color:#fff;
  background:#d5142a;
  box-shadow:0 6px 12px rgba(0,0,0,.42);
  pointer-events:none;
}

#mainCard{display:none}
body.has-content #mainCard{display:block}

#compareWrap{display:none}
body.compare-on #compareWrap{display:block}
#compareCard{display:none}
body.compare-on #compareCard{display:block !important}

#filiWrap{display:none}
body.fili-has #filiWrap{display:block}
#filiWrap{margin-top:20px}

#imgOverlay{position:fixed;inset:0;z-index:200500 !important;display:none}
#imgOverlay.on{
  display:flex;
  flex-direction:column;
  background:rgba(18,20,26,.52);
  height:calc(var(--vvh, 1vh) * 100);
}
#imgOverlay .topbar{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px 12px;color:#fff}
#imgOverlay .topbar .t{font-weight:700}
#imgOverlay .imgwrap{
  flex:0 0 38vh;
  padding:0 12px 10px;
  height:38vh;
  max-height:38vh;
  min-height:180px;
  overflow:hidden;
  position:relative;
}
#imgOverlay img{width:100%;height:100%;max-height:100%;object-fit:contain;border-radius:14px;background:rgba(35,38,46,.9);touch-action:none;transform-origin:center center;will-change:transform}
#imgOverlay .formwrap{
  flex:1 1 auto;
  min-height:0;
  overflow:auto;
  overscroll-behavior:contain;
  -webkit-overflow-scrolling:touch;
  border-radius:26px 26px 0 0;
  padding:12px 12px calc(18px + env(safe-area-inset-bottom));
  background:linear-gradient(165deg, rgba(241,245,251,.24), rgba(200,206,218,.2));
  border:1px solid var(--line-soft);
  backdrop-filter:blur(16px);
  -webkit-backdrop-filter:blur(16px);
}

/* Con teclado abierto: reserva al menos ~1/3 para imagen de referencia */
#imgOverlay.kb-open .imgwrap{
  flex:0 0 max(140px, calc(var(--vvh, 1vh) * 33));
  height:max(140px, calc(var(--vvh, 1vh) * 33));
  max-height:max(140px, calc(var(--vvh, 1vh) * 33));
  min-height:140px;
}

#ovClose,#btnChatGPT,#jobCancel,#imgOverlay .topbar button{min-height:42px}

#jobOverlay{position:fixed;inset:0;z-index:200000;display:none}
#jobOverlay.on{display:flex}
#jobOverlay .backdrop{position:absolute;inset:0;background:rgba(0,0,0,.56);backdrop-filter:blur(9px);-webkit-backdrop-filter:blur(9px)}
#jobOverlay .panel{
  position:relative;
  margin:auto;
  width:min(520px,92vw);
  border-radius:24px;
  padding:16px;
  background:linear-gradient(165deg, rgba(239,243,250,.24), rgba(201,207,220,.2));
  border:1px solid var(--line-soft);
  backdrop-filter:blur(18px);
  -webkit-backdrop-filter:blur(18px);
  box-shadow:var(--shadow-inner), 0 20px 42px rgba(0,0,0,.42);
}
#jobOverlay .title{font-weight:700;margin:0 0 6px}
#jobOverlay .msg{color:var(--muted);margin:0 0 12px}
#jobOverlay .timer{font-variant-numeric:tabular-nums;font-weight:700;opacity:.95;margin:0 0 10px}
#jobOverlay .bar{height:10px;border-radius:999px;overflow:hidden;background:rgba(255,255,255,.16);border:1px solid var(--line-soft)}
#jobOverlay .bar > i{display:block;height:100%;width:35%;background:linear-gradient(90deg,#cbe9ff,#85b9ff);border-radius:999px;animation:jobbar 1.1s linear infinite}
#jobOverlay .actions{display:flex;gap:10px;justify-content:flex-end;flex-wrap:wrap;margin-top:14px}
#jobOverlay .actions button.secondary{background:rgba(241,245,251,.2);border:1px solid var(--line-soft)}

@keyframes jobbar{0%{transform:translateX(-120%)}100%{transform:translateX(320%)}}

#btnCancelar,#btnCompartir{display:none !important}

@media (max-width:900px){
  .row{flex-direction:column}
  .card{width:100%;min-width:unset}
  .two{grid-template-columns:1fr}
  .fili-grid{grid-template-columns:1fr}
  textarea{min-height:170px}
}

@media (max-width:520px){
  :root{
    --btn-size:50px;
    --btn-font:26px;
    --topDockH:86px;
    --bottomDockH:86px;
  }

  body{padding-left:10px;padding-right:10px}
  #topDock,#bottomDock{
    width:calc(100vw - env(safe-area-inset-left) - env(safe-area-inset-right) - 12px);
    padding:10px;
  }
  .hero{border-radius:26px}
  .hero h1{font-size:28px}
}

/* iOS Safari: evita auto-zoom al enfocar inputs (<16px) sin bloquear pinch-zoom */
@media (pointer: coarse){
  input, select, textarea{
    font-size:16px;
  }
}
